!function(t,a,i){"use strict";var n=a(t),e=n.width(),o=a("#main"),s=a("#nav"),r=a("#nav").find("a"),p=o.find(".js-list-wrap"),d=a("#tpDiscount").html(),l=!0,c={1:!1,2:!1,3:!1,4:!1},f={init:function(){p.width(e),f.loadTypeList(G.type)},loadTypeList:function(i){var n=e*(1-i);o.css({"-webkit-transform":"-webkit-translateX("+n+"px)","-moz-transform":"-moz-translateX("+n+"px)","-o-transform":"-o-translateX("+n+"px)",transform:"translateX("+n+"px)"}),r.removeClass("nav-active"),r.eq(i-1).addClass("nav-active"),c[i]?G.type=i:(t.oLoad(),l&&(l=!1,a.ajax({url:"/coupon/list",type:"POST",dataType:"json",data:{type:i,userId:G.userId},success:function(t){if(t.status){for(var a,n=t.couponList,e=n.length,s=[];e--;)a=n[e],s.push(d.replace("${full}",a.full).replace("${expiryDate}",a.expiryDate).replace("${discount}",a.discount));o.find(".js-list-wrap-"+i).html(s.join("")),c[i]=!0,G.type=i,f.dataEnd()}else f.dataEnd(t.msg)},error:function(){f.dataEnd("网络错误")}})))},dataEnd:function(a){t.cLoad(),a&&t.oConfrim(a),l=!0},swipe:function(t){var a=~~G.type;return"right"===t&&a>1?void f.loadTypeList(a-1):void("left"===t&&a<4&&f.loadTypeList(a+1))}};f.init(),o.on("swipeLeft",function(){f.swipe("left")}).on("swipeRight",function(){f.swipe("right")}),n.on("resize",function(){p.width(e=n.width())}),s.on("tap","a",function(){f.loadTypeList(a(this).data("type"))})}(window||this,Zepto);