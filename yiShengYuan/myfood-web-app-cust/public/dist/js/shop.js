!function(o,t,a){"use strict";var n=t("#foodList"),e=t("#shopName"),i=t("#footer"),d=t("#send"),c=d.find(".js-send-money"),s=i.find(".js-num"),r=i.find(".js-price"),f=!0,l={carOpt:function(a){G.userId?f&&(f=!1,o.oLoad(),t.ajax({url:"/car/option",type:"POST",dataType:"json",data:{type:a.data("type"),foodid:a.closest(".js-food-item").data("id"),userid:G.userId,diningtypename:d.find(".js-din-mode.active").data("enname")},success:function(o){o.status?(o.data.addCar=a.closest(".js-add-car"),l.carSuccess(o.data)):l.optEnd(o.msg)},error:function(){l.optEnd("网络出错")}})):o.login()},optEnd:function(t){o.cLoad(),t&&o.oConfrim(t,!0),f=!0},carSuccess:function(o){o.foodTotalCount?o.addCar.addClass("active"):o.addCar.removeClass("active"),o.addCar.find(".js-car-num").html(o.foodTotalCount),o.totalCount?i.addClass("active"):i.removeClass("active"),r.html(o.totalAmount),s.html(o.totalCount),l.optEnd()},statement:function(){i.is(".active")&&(1==G.device?o.android.statement():location.href="objc://Statement")},toCar:function(){i.is(".active")&&(1==G.device?o.android.toCar():location.href="objc://ToCar")},goShop:function(t){var a=t.closest(".js-food-item").data("id");1==G.device?o.android.goFood(a):location.href="objc://GoFood/"+a},choiceDinType:function(o){o.siblings(".active").removeClass("active"),o.addClass("active"),c.html(o.data("freight"))},call:function(){1==G.device?o.android.callPhone(G.phone):location.href="objc://callPhone:/"+G.phone}};e.on("tap",".js-phone",function(){l.call()}),n.on("tap",".js-car-opt",function(){l.carOpt(t(this))}).on("tap",".js-go-food",function(){l.goShop(t(this))}),d.on("tap",".js-din-mode",function(){l.choiceDinType(t(this))}),i.on("tap",".js-statement",function(){l.statement()}).on("tap",".js-to-car",function(){l.toCar()})}(window||this,Zepto);