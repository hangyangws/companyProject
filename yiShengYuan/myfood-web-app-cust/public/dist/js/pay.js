!function(a,e,t){"use strict";var o=e("#main"),n=e("#footer"),i=n.find(".js-user-pay"),s=e("#mask"),c=o.find(".js-dis-info"),d=!0,r={orderSn:G.orderSn,orderId:G.orderId,userPay:G.payMoney-0,device:G.device,expectedTime:G.expectedTime},p={choiceDis:function(a){G.payMoney>=a.data("full")&&(a.parent().find(".dis-each.active").removeClass("active"),a.addClass("active"),r.userpay=G.payMoney-a.data("dis"),r.discountId=a.data("id"),c.html("满"+a.data("full")+"减"+a.data("dis")),i.html(r.userpay.toFixed(2)));var e=setTimeout(function(){clearTimeout(e),p.maskOpt("close")},200)},maskOpt:function(a){var e;"open"===a?(s.removeClass("none"),e=setTimeout(function(){clearTimeout(e),s.addClass("active")},100)):(s.removeClass("active"),e=setTimeout(function(){clearTimeout(e),s.addClass("none")},800))},pay:function(){a.location.href="/pay?data="+JSON.stringify(r)},payCash:function(){d&&(d=!1,a.oLoad(),e.ajax({url:"/pay",type:"POST",dataType:"json",data:r,success:function(e){a.location.href="/pay/cashReturn?data="+JSON.stringify(e)},error:function(){d=!0,a.cLoad(),a.oConfrim("网络出错",!0)}}))}};s.on("tap",".dis-each",function(){p.choiceDis(e(this))}),o.on("tap",".js-open-dis",function(){p.maskOpt("open")}),n.on("tap",".js-pay",function(){p.pay()}).on("tap",".js-pay-cash",function(){p.payCash()})}(window||this,Zepto);