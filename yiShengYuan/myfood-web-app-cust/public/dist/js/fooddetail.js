!function(o,t,a){"use strict";var n=(t(o),t("#footer")),i=n.find(".js-price"),e=t("#shop"),s=n.find(".js-num"),c=t("#addCar"),d=c.find(".js-food-num"),r=!0,u={carOpt:function(a){G.userid?r&&(r=!1,o.oLoad(),t.ajax({url:"/car/option",type:"POST",dataType:"json",data:{type:a.data("type"),foodid:G.foodid,userid:G.userid},success:function(o){o.status?u.carSuccess(o.data):u.optEnd(o.msg)},error:function(){u.optEnd("网络出错")}})):o.login()},optEnd:function(t){o.cLoad(),t&&o.oConfrim(t,!0),r=!0},carSuccess:function(o){o.foodTotalCount?c.addClass("active"):c.removeClass("active"),d.html(o.foodTotalCount),o.totalCount?n.addClass("active"):n.removeClass("active"),i.html(o.totalAmount),s.html(o.totalCount),u.optEnd()},toShop:function(){1==G.device?o.android.toShop(G.shopid,G.shopName):location.href="objc://ToShop/"+G.shopid+"/"+G.shopName},statement:function(){n.is(".active")&&(1==G.device?o.android.statement():location.href="objc://Statement")},toCar:function(){n.is(".active")&&(1==G.device?o.android.toCar():location.href="objc://ToCar")}};c.on("tap",".js-car-opt",function(){u.carOpt(t(this))}),e.on("tap",".js-to-shop",function(){u.toShop()}),n.on("tap",".js-statement",function(){u.statement()}).on("tap",".js-to-car",function(){u.toCar()})}(window||this,Zepto);