!function(o,t,n){"use strict";var e=t("#listWrap"),i=(t("#mask"),0),d=-75,c=t("#noneFood").html(),a=!0,f={touchStart:function(o,t){var n=e.find(".food-item.active");"undefined"!=typeof n[0]&&n[0]!==t[0]&&f.changeX(n.removeClass("active").find(".food-edit"),0),t.addClass("active"),i=o.changedTouches[0].clientX},touchMove:function(o,t){d+=o-i,-78>d&&(d=-78),d>0&&(d=0),f.changeX(t.find(".food-edit"),d)},touchMoveEnd:function(o,t){-30>d?f.changeX(t.find(".food-edit"),-78):(f.changeX(t.find(".food-edit"),0),t.removeClass("active"))},changeX:function(o,t){o.css({"-webkit-transform":"translate3d("+t+"px, 0, 0)","-moz-transform":"translate3d("+t+"px, 0, 0)","-o-transform":"translate3d("+t+"px, 0, 0)",transform:"translate3d("+t+"p, 0, 0x)"})},del:function(n){a&&o.oConfrim("确认删除此菜品",!1,function(){a=!1,o.cConfrim(),t.ajax({url:"/food/del",type:"DELETE",dataType:"json",data:{id:n.data("id")},success:function(t){t.status?(n.addClass("del"),setTimeout(function(){n.remove(),0===e.find(".food-item").length&&e.html(c)},800)):o.oConfrim(t.msg,!0),a=!0},error:function(){o.oConfrim("操作失败",!0),a=!0}})})},edit:function(t){var n=t.data("id");if(1==G.device)o.android.toDishes(n);else{var e=["EditFood",n];location.href="objc://"+e.join(":/")}}};e.on("touchstart",".food-item",function(o){f.touchStart(o,t(this))}).on("touchmove",".food-item",function(o){f.touchMove(o.changedTouches[0].clientX,t(this))}).on("touchend",".food-item",function(o){f.touchMoveEnd(o,t(this))}).on("touchcancel",".food-item",function(o){f.touchMoveEnd(o,t(this))}).on("tap",".del-btn",function(){f.del(t(this).closest(".food-item"))}).on("tap",".edit-btn",function(){f.edit(t(this).closest(".food-item"))})}(window||this,Zepto);